<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Laporan Bagi Hasil Usaha WiFi</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen flex items-center justify-center px-3">

<div class="w-full max-w-md bg-white rounded-xl shadow-lg p-6">
    <h2 class="text-xl font-bold text-center mb-6">
        Laporan Bagi Hasil WiFi
    </h2>

    <!-- Alert Tailwind -->
    <div id="alertBox" class="hidden mb-4 rounded-lg px-4 py-3 text-sm"></div>

    <label class="block font-semibold mb-1">Nama Mitra</label>
    <input type="text" id="mitra"
        placeholder="Contoh: Bpk Andi"
        class="w-full border rounded-lg px-3 py-2 mb-4 focus:ring-2 focus:ring-green-500">

    <label class="block font-semibold mb-1">Periode</label>
    <select id="bulan"
        class="w-full border rounded-lg px-3 py-2 mb-3 focus:ring-2 focus:ring-green-500">
        <option>Januari</option><option>Februari</option><option>Maret</option>
        <option>April</option><option>Mei</option><option>Juni</option>
        <option>Juli</option><option>Agustus</option><option>September</option>
        <option>Oktober</option><option>November</option><option>Desember</option>
    </select>

    <!-- Tahun otomatis -->
    <input type="number" id="tahun"
        class="w-full border rounded-lg px-3 py-2 mb-4 bg-gray-100 text-gray-700"
        readonly>

    <label class="block font-semibold mb-1">Pendapatan Utama (Rp)</label>
    <input type="number" id="pendapatan"
        placeholder="Contoh: 5000000"
        class="w-full border rounded-lg px-3 py-2 mb-4 focus:ring-2 focus:ring-green-500">

    <label class="block font-semibold mb-1">
        Pemasukan Lainnya (Rp)
        <span class="text-xs text-gray-500 font-normal">(pembayaran susulan, dll)</span>
    </label>
    <input type="number" id="lainnya"
        placeholder="Contoh: 300000"
        class="w-full border rounded-lg px-3 py-2 mb-5 focus:ring-2 focus:ring-green-500">

    <button onclick="hitung()"
        class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg">
        Hitung & Buat Laporan
    </button>

    <div id="report"
        class="hidden mt-6 bg-gray-50 border rounded-lg p-4 text-sm whitespace-pre-line">
    </div>

    <button onclick="copyReport()" id="btnCopy"
        class="hidden mt-3 w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg">
        Copy Laporan
    </button>

    <div class="text-center text-xs text-gray-500 mt-5">
        Â© <span id="yearFooter"></span> STEKSA.NET
    </div>
</div>

<script>
const currentYear = new Date().getFullYear();
document.getElementById("tahun").value = currentYear;
document.getElementById("yearFooter").innerText = currentYear;

function rupiah(x) {
    return x.toLocaleString('id-ID');
}

function showAlert(message) {
    const alertBox = document.getElementById("alertBox");
    alertBox.className =
        "mb-4 rounded-lg px-4 py-3 text-sm bg-red-100 text-red-700 border border-red-300";
    alertBox.innerText = message;
    alertBox.classList.remove("hidden");

    setTimeout(() => {
        alertBox.classList.add("hidden");
    }, 3000);
}

function hitung() {
    let mitra = document.getElementById("mitra").value;
    let bulan = document.getElementById("bulan").value;
    let tahun = document.getElementById("tahun").value;

    let pendapatan = parseFloat(document.getElementById("pendapatan").value) || 0;
    let lainnya = parseFloat(document.getElementById("lainnya").value) || 0;

    if (!mitra || pendapatan <= 0) {
        showAlert("Nama Mitra dan Pendapatan Utama wajib diisi");
        return;
    }

    let totalPendapatan = pendapatan + lainnya;
    let operasional = totalPendapatan * 0.20;
    let laba = totalPendapatan - operasional;
    let bagi = laba / 2;

    let teks =
`LAPORAN BAGI HASIL USAHA
MITRA STEKSA.NET

Nama Mitra : ${mitra}
Periode    : ${bulan} ${tahun}

Rincian Pendapatan:
- Pendapatan Utama   : Rp ${rupiah(pendapatan)}
- Pemasukan Lainnya  : Rp ${rupiah(lainnya)}
--------------------------------
Total Pendapatan     : Rp ${rupiah(totalPendapatan)}

Biaya Operasional (20%) : Rp ${rupiah(operasional)}
Laba Bersih             : Rp ${rupiah(laba)}

Pembagian Hasil:
- Pemilik Usaha : Rp ${rupiah(bagi)}
- Mitra         : Rp ${rupiah(bagi)}

Terima kasih atas kerja samanya.

Hormat Kami,
STEKSA.NET
PT. SOLUSI TEKNOLOGI SANTARA
`;

    document.getElementById("report").innerText = teks;
    document.getElementById("report").classList.remove("hidden");
    document.getElementById("btnCopy").classList.remove("hidden");
}

function copyReport() {
    navigator.clipboard.writeText(
        document.getElementById("report").innerText
    );
    alert("Laporan berhasil di-copy");
}
</script>

</body>
</html>
